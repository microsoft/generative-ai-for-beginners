# ジェネレーティブAIを活用したチャットアプリケーションの構築

[![ジェネレーティブAIを活用したチャットアプリケーションの構築](../../../translated_images/07-lesson-banner.png?WT.21b04c80931fcfbbce2e012cb013fa889033dc1cf59443c7c82ce598eaf13629.ja.mc_id=academic-105485-koreyst)](https://aka.ms/gen-ai-lessons7-gh?WT.mc_id=academic-105485-koreyst)

> _(上の画像をクリックすると、このレッスンのビデオを視聴できます)_

テキスト生成アプリの構築方法を見てきたので、次はチャットアプリケーションに目を向けましょう。

チャットアプリケーションは日常生活に統合され、カジュアルな会話の手段以上のものを提供しています。カスタマーサービスや技術サポート、さらには高度なアドバイザリーシステムの重要な一部となっています。最近、チャットアプリケーションから何らかのサポートを受けたことがあるかもしれません。これらのプラットフォームにジェネレーティブAIのような高度な技術を統合するにつれて、その複雑さと課題も増大します。

解決すべきいくつかの質問は次のとおりです：

- **アプリの構築**。特定のユースケースに合わせてこれらのAI駆動アプリケーションを効率的に構築し、シームレスに統合するにはどうすればよいでしょうか？
- **監視**。デプロイ後、アプリケーションが機能面と[責任あるAIの6つの原則](https://www.microsoft.com/ai/responsible-ai?WT.mc_id=academic-105485-koreyst)に従って最高の品質で動作していることをどのように監視し、確保することができるでしょうか？

自動化とシームレスな人間と機械のインタラクションが特徴の時代に進む中で、ジェネレーティブAIがチャットアプリケーションの範囲、深さ、適応性をどのように変革するかを理解することが重要です。このレッスンでは、これらの複雑なシステムを支えるアーキテクチャの側面を調査し、ドメイン固有のタスクに合わせてそれらを微調整する方法論を深掘りし、責任あるAIのデプロイメントを確保するための指標と考慮事項を評価します。

## はじめに

このレッスンでは以下をカバーします：

- チャットアプリケーションを効率的に構築し統合するための技術。
- アプリケーションにカスタマイズと微調整を適用する方法。
- チャットアプリケーションを効果的に監視するための戦略と考慮事項。

## 学習目標

このレッスンの終わりまでに、次のことができるようになります：

- 既存のシステムにチャットアプリケーションを構築し統合する際の考慮事項を説明する。
- 特定のユースケースに合わせてチャットアプリケーションをカスタマイズする。
- AI駆動のチャットアプリケーションの品質を効果的に監視し維持するための重要な指標と考慮事項を特定する。
- チャットアプリケーションがAIを責任を持って活用することを確保する。

## チャットアプリケーションへのジェネレーティブAIの統合

ジェネレーティブAIを通じてチャットアプリケーションを向上させることは、それらを賢くするだけではなく、品質の高いユーザー体験を提供するためにアーキテクチャ、パフォーマンス、ユーザーインターフェースを最適化することです。これには、アーキテクチャの基礎、APIの統合、ユーザーインターフェースの考慮事項を調査することが含まれます。このセクションでは、既存のシステムに組み込む場合でも、単独のプラットフォームとして構築する場合でも、これらの複雑な環境をナビゲートするための包括的なロードマップを提供することを目指しています。

このセクションの終わりまでに、チャットアプリケーションを効率的に構築し組み込むために必要な専門知識を身につけることができます。

### チャットボットまたはチャットアプリケーション？

チャットアプリケーションを構築する前に、'チャットボット'と'AI駆動のチャットアプリケーション'を比較してみましょう。これらは異なる役割と機能を持っています。チャットボットの主な目的は、よくある質問に答えたり、荷物を追跡したりといった特定の会話タスクを自動化することです。通常、ルールベースのロジックや複雑なAIアルゴリズムによって制御されます。一方、AI駆動のチャットアプリケーションは、テキスト、音声、ビデオチャットなどのさまざまなデジタルコミュニケーションを促進するために設計されたはるかに広範な環境です。その特徴は、幅広い入力とコンテキストの手がかりに基づいて応答を生成する、微妙で人間のような会話をシミュレートするジェネレーティブAIモデルの統合です。ジェネレーティブAI駆動のチャットアプリケーションは、オープンドメインのディスカッションに参加し、進化する会話のコンテキストに適応し、さらには創造的または複雑な対話を生成することができます。

以下の表は、デジタルコミュニケーションにおけるそれらの独自の役割を理解するための主な違いと類似点を示しています。

| チャットボット                           | ジェネレーティブAI駆動のチャットアプリケーション |
| ------------------------------------- | -------------------------------------- |
| タスクに焦点を当てたルールベース           | コンテキストを認識する                     |
| 大きなシステムに統合されることが多い        | 1つ以上のチャットボットをホストすることも可能  |
| プログラムされた機能に限定される            | ジェネレーティブAIモデルを組み込む           |
| 専門的で構造化されたインタラクション        | オープンドメインのディスカッションが可能       |

### SDKとAPIを活用した既存の機能の利用

チャットアプリケーションを構築する際の最初のステップは、既存のものを評価することです。SDKやAPIを使用してチャットアプリケーションを構築することは、さまざまな理由で有利な戦略です。よく文書化されたSDKやAPIを統合することで、スケーラビリティやメンテナンスの懸念を解決しながら、アプリケーションを長期的な成功に向けて戦略的に位置づけることができます。

- **開発プロセスを迅速化し、オーバーヘッドを削減**: 高価なプロセスを自分で構築する代わりに既存の機能に頼ることで、ビジネスロジックなど、アプリケーションの他の重要な側面に集中できます。
- **より良いパフォーマンス**: 機能をゼロから構築するときには、「どのようにスケールするのか？このアプリケーションは急なユーザーの流入に対応できるのか？」といった疑問が浮かびます。よくメンテナンスされたSDKやAPIには、これらの懸念に対する解決策が組み込まれていることがよくあります。
- **メンテナンスが容易**: 多くのAPIやSDKは、新しいバージョンがリリースされた際にライブラリを更新するだけで、更新や改善が容易に管理できます。
- **最新技術へのアクセス**: 広範なデータセットで微調整され、訓練されたモデルを活用することで、アプリケーションに自然言語の機能を提供します。

SDKやAPIの機能にアクセスするには、通常、提供されたサービスを使用するための許可を取得する必要があります。これは、多くの場合、ユニークなキーや認証トークンを使用して行われます。ここでは、OpenAI Pythonライブラリを使用して、これがどのように見えるかを探ります。また、このレッスンのための[OpenAIのノートブック](../../../07-building-chat-applications/python/oai-assignment.ipynb)や[Azure OpenAI Servicesのノートブック](../../../07-building-chat-applications/python/aoai-assignment.ipynb)でも試してみることができます。

```python
import os
from openai import OpenAI

API_KEY = os.getenv("OPENAI_API_KEY","")

client = OpenAI(
    api_key=API_KEY
    )

chat_completion = client.chat.completions.create(model="gpt-3.5-turbo", messages=[{"role": "user", "content": "Suggest two titles for an instructional lesson on chat applications for generative AI."}])
```

上記の例では、GPT-3.5 Turboモデルを使用してプロンプトを完了していますが、APIキーが事前に設定されていることに注目してください。キーを設定しないとエラーが発生します。

## ユーザーエクスペリエンス (UX)

一般的なUXの原則はチャットアプリケーションにも適用されますが、機械学習コンポーネントが関与するため、特に重要になる追加の考慮事項があります。

- **曖昧さに対処するメカニズム**: ジェネレーティブAIモデルは時折曖昧な回答を生成します。ユーザーがこの問題に直面した場合、明確化を求めることができる機能が役立ちます。
- **コンテキストの保持**: 高度なジェネレーティブAIモデルは会話内でコンテキストを記憶する能力を持っており、ユーザーエクスペリエンスに必要な資産となることがあります。ユーザーにコンテキストを管理する能力を与えることはユーザーエクスペリエンスを向上させますが、敏感なユーザー情報を保持するリスクもあります。コンテキストの必要性とプライバシーのバランスを取るために、保持ポリシーの導入など、情報がどのくらいの期間保存されるかを考慮することができます。
- **パーソナライゼーション**: 学習と適応の能力を持つAIモデルは、ユーザーに個別の体験を提供します。ユーザープロファイルなどの機能を通じてユーザーエクスペリエンスをカスタマイズすることで、ユーザーは理解されていると感じるだけでなく、特定の回答を見つけることを助け、より効率的で満足のいくインタラクションを生み出します。

パーソナライゼーションの一例として、OpenAIのChatGPTの「カスタム指示」設定があります。プロンプトにとって重要なコンテキストであるかもしれない自分自身に関する情報を提供することができます。以下はカスタム指示の例です。

![ChatGPTのカスタム指示設定](../../../translated_images/custom-instructions.png?WT.11dedb56ee96f65348e96bb7d6a0e61e668da5fe777ccd5b63f23e0e7fac407b.ja.mc_id=academic-105485-koreyst)

この「プロファイル」は、ChatGPTにリンクリストに関するレッスンプランを作成するよう促します。ユーザーがその経験に基づいてより詳細なレッスンプランを求めるかもしれないことをChatGPTが考慮していることに注目してください。

![リンクリストに関するレッスンプランのChatGPTプロンプト](../../../translated_images/lesson-plan-prompt.png?WT.a7012bd5b8467d2255be3eb7be93a8622cf74091e2fa815e80c0118416f064fc.ja.mc_id=academic-105485-koreyst)

### 大規模言語モデル向けのMicrosoftのシステムメッセージフレームワーク

[Microsoftは、LLMからの応答を生成する際の効果的なシステムメッセージの書き方についてのガイダンスを提供しています](https://learn.microsoft.com/azure/ai-services/openai/concepts/system-message#define-the-models-output-format?WT.mc_id=academic-105485-koreyst)。以下の4つのエリアに分かれています：

1. モデルの対象者、その能力と制限を定義する。
2. モデルの出力形式を定義する。
3. モデルの意図された動作を示す具体的な例を提供する。
4. 追加の行動ガードレールを提供する。

### アクセシビリティ

ユーザーが視覚、聴覚、運動、または認知障害を持っているかどうかに関わらず、よく設計されたチャットアプリケーションはすべての人が使えるべきです。以下のリストは、さまざまなユーザーの障害に対してアクセシビリティを向上させることを目的とした特定の機能を分解しています。

- **視覚障害のための機能**: 高コントラストテーマとテキストのサイズ変更、スクリーンリーダーの互換性。
- **聴覚障害のための機能**: テキスト読み上げと音声認識機能、音声通知の視覚的なキュー。
- **運動障害のための機能**: キーボードナビゲーションのサポート、音声コマンド。
- **認知障害のための機能**: 簡単な言語オプション。

## ドメイン固有の言語モデルのカスタマイズと微調整

自社の専門用語を理解し、そのユーザーベースがよく持つ特定の質問を予測するチャットアプリケーションを想像してみてください。いくつかのアプローチがあります：

- **DSLモデルの活用**。DSLはドメイン固有言語を意味します。特定のドメインで訓練されたいわゆるDSLモデルを活用して、その概念やシナリオを理解することができます。
- **微調整を適用**。微調整は、特定のデータでモデルをさらに訓練するプロセスです。

## カスタマイズ: DSLの使用

ドメイン固有の言語モデル (DSLモデル) を活用することで、ユーザーエンゲージメントを高め、専門的でコンテキストに関連したインタラクションを提供します。これは、特定の分野、業界、またはテーマに関連したテキストを理解し生成するために訓練または微調整されたモデルです。DSLモデルの使用オプションは、ゼロから訓練することから、SDKやAPIを通じて既存のものを使用することまでさまざまです。もう一つのオプションは微調整で、既存の事前訓練されたモデルを特定のドメインに適応させることです。

## カスタマイズ: 微調整の適用

微調整は、事前訓練されたモデルが特定のドメインや特定のタスクで不十分な場合に考慮されます。

たとえば、医療の質問は複雑で、多くのコンテキストを必要とします。医療専門家が患者を診断する際には、生活習慣や既往症などのさまざまな要因に基づいており、診断を確認するために最近の医療ジャーナルに依存することさえあります。このような微妙なシナリオでは、汎用AIチャットアプリケーションは信頼できる情報源にはなり得ません。

### シナリオ: 医療アプリケーション

医療従事者が治療ガイドライン、薬物相互作用、または最近の研究結果への迅速な参照を提供するために設計されたチャットアプリケーションを考えてみましょう。

汎用モデルは基本的な医療質問に答えたり、一般的なアドバイスを提供するのに適しているかもしれませんが、次のような課題があります：

- **非常に具体的または複雑なケース**。たとえば、神経科医がアプリケーションに「小児の薬物抵抗性てんかんの管理における現在のベストプラクティスは何ですか？」と尋ねる場合。
- **最近の進展の欠如**。汎用モデルは、神経学と薬理学の最新の進展を取り入れた現在の回答を提供するのに苦労するかもしれません。

このような場合には、専門の医療データセットでモデルを微調整することで、これらの複雑な医療の質問により正確かつ信頼性を持って対応する能力を大幅に向上させることができます。これは、対処する必要のあるドメイン固有の課題

**免責事項**:
この文書は、機械ベースのAI翻訳サービスを使用して翻訳されています。正確さを期すため努力しておりますが、自動翻訳には誤りや不正確さが含まれる場合がありますのでご注意ください。原文の母国語での文書が権威ある情報源とみなされるべきです。重要な情報については、専門の人間による翻訳をお勧めします。この翻訳の使用に起因する誤解や誤訳について、当社は責任を負いません。